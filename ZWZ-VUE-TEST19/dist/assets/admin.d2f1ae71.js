import{a as e}from"./axios.468b7dd2.js";import{m as r,i as s,g as t}from"./index.cfbf38c0.js";import{E as o}from"./element-plus.c63ee1ff.js";const n=e.create({baseURL:"/upload",timeout:3e4,withCredentials:!1});function a(e,s){return r.post("/setMessage",s,{headers:{id:e}})}function i(e){const{page:r,size:t,name:o}=e;return s.get(`/pageMusic/${r}/${t}`,{params:{keyword:o}})}function c(e){return s.post("/freezeMusic",{},{params:{id:e}})}function u(e){return s.post("/unfreezeMusic",{},{params:{id:e}})}function d(e){return s.post("/addmusic",e)}function p(e){const r={};for(const s in e)e.hasOwnProperty(s)&&null!==e[s]&&void 0!==e[s]&&(r[s]=e[s]);const o=t();return s.post("/editMusic",r,{headers:{id:o}})}n.interceptors.request.use((e=>("multipart/form-data"===e.headers["Content-Type"]&&delete e.headers["Content-Type"],e)),(e=>Promise.reject(e))),n.interceptors.response.use((e=>{const r=e.data;if(20===r.code||!0===r.success)return e.data;{const e=r.message||"文件上传失败";return o({message:e,type:"error",duration:5e3}),Promise.reject(new Error(e))}}),(e=>{if("ECONNABORTED"===e.code){const r=new Error("上传超时，请检查网络连接或后端服务状态");throw r.code=e.code,r.originalError=e,r}if("ERR_NETWORK"===e.code){const r=new Error("网络连接异常，请确认上传服务是否正在运行在8089端口");throw r.code=e.code,r.originalError=e,r}return Promise.reject(e)}));export{u as a,d as b,p as e,c as f,i as g,a as u};
