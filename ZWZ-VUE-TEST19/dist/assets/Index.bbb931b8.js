import{_ as a,e as s}from"./index.cfbf38c0.js";import{g as e,r as l}from"./mylike.b9b8a089.js";import{E as i}from"./element-plus.c63ee1ff.js";import{aA as r,r as c,o as t,y as u,D as n,G as o,U as m,M as d,a5 as v,z as p,u as y,R as f}from"./vendor.1112e821.js";import"./axios.468b7dd2.js";const k={class:"like-music-container"},g={class:"content-wrapper"},_={key:0,class:"error-container"},h={key:1,class:"empty-container"},b={key:2,class:"music-list"},j=["onClick"],I=["src","title"],C={class:"music-info"},N={class:"music-title"},w={class:"music-meta"},x={class:"music-actions"},A=["onClick"];var E=a({__name:"Index",setup(a){const E=r((()=>s((()=>import("./musicPlayer.10ac923a.js")),["assets/musicPlayer.10ac923a.js","assets/musicPlayer.78314e69.css","assets/index.cfbf38c0.js","assets/index.12a402db.css","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]))),U=c([]),M=c(""),S=c({url:""});t((()=>{D()}));const D=async()=>{M.value="";try{const a=await e();Array.isArray(a)?U.value=a:M.value="数据格式错误"}catch(a){M.value="加载失败，请稍后重试"}},L=a=>{if(!a||isNaN(a))return"0:00";return`${Math.floor(a/60)}:${Math.floor(a%60).toString().padStart(2,"0")}`};return(a,s)=>(u(),n("div",k,[s[2]||(s[2]=o("div",{class:"page-header"},[o("h1",null,"我的收藏音乐")],-1)),o("div",g,[M.value?(u(),n("div",_,[o("p",null,m(M.value),1),o("button",{onClick:D},"重新加载。。。")])):0===U.value.length?(u(),n("div",h,[...s[1]||(s[1]=[o("p",null,"还没收藏任何音乐。。。",-1)])])):(u(),n("div",b,[(u(!0),n(d,null,v(U.value,((a,e)=>(u(),n("div",{key:a.musicId,class:"music-item"},[o("div",{class:"music-cover-wrapper",onClick:s=>(a=>{0!==a.activation?S.value={url:a.musicUrl||"",id:a.musicId,name:a.musicName}:i.error("这个歌曲已被下架，无法播放！")})(a)},[o("img",{src:a.imageUrl,alt:"音乐封面",title:a.musicName||"未知歌曲",onError:s[0]||(s[0]=a=>{a.target.src="/default-music-cover.png"})},null,40,I)],8,j),o("div",C,[o("h3",N,m(a.musicName||"未知歌曲"),1),o("div",w,[o("span",null,m(a.musicSinger||a.singerUsername||"未知歌手"),1),o("span",null,m(L(a.timeLength)),1)])]),o("div",x,[o("button",{class:"unlike-btn",onClick:s=>(async(a,s)=>{try{const e=await l(a);20===e.code||!0===e.success?U.value.splice(s,1):alert("取消收藏失败: "+(e.message||"未知错误"))}catch(e){alert("取消收藏失败，请稍后重试")}})(a.musicId,e)}," 取消收藏 ",8,A)])])))),128))]))]),S.value.url?(u(),p(y(E),{key:0,"audio-url":S.value.url,autoplay:!0},null,8,["audio-url"])):f("",!0)]))}},[["__scopeId","data-v-d09017a4"]]);export{E as default};
