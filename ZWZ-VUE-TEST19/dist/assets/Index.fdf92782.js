import{r as a,c as s,o as l,y as e,D as i,G as n,U as t,H as c,M as u,a5 as o,R as r,S as v,$ as d}from"./vendor.1112e821.js";import{b as p,c as m}from"./singer.7d3633a2.js";import{_ as g}from"./index.cfbf38c0.js";import"./axios.468b7dd2.js";import"./element-plus.c63ee1ff.js";const b={class:"singer-detail-container"},y={class:"singer-info-card"},k={class:"singer-avatar"},f=["src"],h={class:"singer-info"},C={class:"singer-name"},j={class:"singer-meta"},x={class:"singer-join-date"},_={class:"singer-stats"},A={class:"stat-item"},w={class:"singer-bio"},D={class:"music-list-section"},N={key:0,class:"loading-container"},z={key:1,class:"error-container"},I={class:"error-message"},M={key:2,class:"empty-container"},S={key:3,class:"music-list"},T=["onClick"],U={class:"music-index"},G={class:"music-info"},H={class:"music-name"},L={class:"music-meta"},O={class:"music-date"},R={class:"music-actions"},$=["onClick"],q=["onClick"],B=["onClick"],E={key:4,class:"pagination-container"},F={class:"pagination-info"},J={class:"pagination-controls"},K=["disabled"],P={class:"current-page"},Q=["disabled"],V={key:0,class:"music-player"},W={class:"player-info"};var X=g({__name:"Index",setup(g){const X=a({}),Y=a([]),Z=a(!1),aa=a(""),sa=a(1),la=a(10),ea=a(0),ia=a(null),na=s((()=>Math.ceil(ea.value/la.value))),ta=a=>{if(!a)return"";return new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})},ca=async()=>{Z.value=!0,aa.value="";try{const a=await m({pn:sa.value,size:la.value});a.data&&Array.isArray(a.data.records)?(Y.value=a.data.records,ea.value=a.data.total):Array.isArray(a)?(Y.value=a,ea.value=a.length):(Y.value=[],ea.value=0)}catch(a){aa.value="获取音乐列表失败",Y.value=[]}finally{Z.value=!1}},ua=a=>{a>=1&&a<=na.value&&(sa.value=a,ca())},oa=a=>{ia.value=a},ra=()=>{},va=()=>{ia.value=null};return l((()=>{(async()=>{try{const a=await p();X.value=a}catch(a){aa.value="获取歌手信息失败"}})(),ca()})),(a,s)=>(e(),i("div",b,[n("div",y,[n("div",k,[n("img",{src:X.value.imageUrl||"/default-avatar.png",alt:"歌手头像"},null,8,f)]),n("div",h,[n("h2",C,t(X.value.username||"加载中..."),1),n("div",j,[n("span",{class:c(["singer-activation",{active:0===X.value.activation}])},t(0===X.value.activation?"已激活":"已禁用"),3),n("span",x,t(ta(X.value.createTime)),1)]),n("div",_,[n("span",A,[n("strong",null,t(Y.value.length),1),s[2]||(s[2]=n("span",null,"音乐作品",-1))])])])]),n("div",w,[s[3]||(s[3]=n("h3",null,"歌手简介",-1)),n("p",null,t(X.value.about||"该歌手暂无简介"),1)]),n("div",D,[s[9]||(s[9]=n("div",{class:"section-header"},[n("h3",null,"音乐作品")],-1)),Z.value?(e(),i("div",N,[...s[4]||(s[4]=[n("div",{class:"loading-spinner"},null,-1),n("p",null,"正在加载音乐列表...",-1)])])):aa.value?(e(),i("div",z,[n("p",I,t(aa.value),1),n("button",{onClick:ca,class:"retry-button"},"重试")])):Z.value||0!==Y.value.length?(e(),i("div",S,[(e(!0),i(u,null,o(Y.value,(a=>(e(),i("div",{key:a.id,class:"music-item",onClick:s=>oa(a)},[n("div",U,t(Y.value.indexOf(a)+1),1),n("div",G,[n("h4",H,t(a.musicName),1),n("p",L,[n("span",{class:c(["music-status",{active:0===a.status}])},t(0===a.status?"已发布":"已下架"),3),n("span",O,t(ta(a.createTime)),1)])]),n("div",R,[n("button",{onClick:d((s=>oa(a)),["stop"]),class:"action-button play-btn"},[...s[6]||(s[6]=[n("i",{class:"icon-play"},null,-1),v(" 播放 ",-1)])],8,$),n("button",{onClick:d((a=>{}),["stop"]),class:"action-button edit-btn"},[...s[7]||(s[7]=[n("i",{class:"icon-edit"},null,-1),v(" 编辑 ",-1)])],8,q),n("button",{onClick:d((s=>(async a=>{if(confirm("确定要删除这首音乐吗？"))try{ca()}catch(s){alert("删除音乐失败")}})(a.id)),["stop"]),class:"action-button delete-btn"},[...s[8]||(s[8]=[n("i",{class:"icon-delete"},null,-1),v(" 删除 ",-1)])],8,B)])],8,T)))),128))])):(e(),i("div",M,[...s[5]||(s[5]=[n("p",null,"暂无音乐作品",-1)])])),!Z.value&&!aa.value&&ea.value>0?(e(),i("div",E,[n("div",F," 共 "+t(ea.value)+" 条记录 ",1),n("div",J,[n("button",{onClick:s[0]||(s[0]=a=>ua(sa.value-1)),disabled:1===sa.value,class:"page-button"}," 上一页 ",8,K),n("span",P,t(sa.value)+" / "+t(na.value),1),n("button",{onClick:s[1]||(s[1]=a=>ua(sa.value+1)),disabled:sa.value>=na.value,class:"page-button"}," 下一页 ",8,Q)])])):r("",!0)]),ia.value?(e(),i("div",V,[n("div",W,[n("h4",null,t(ia.value.musicName),1),s[10]||(s[10]=n("p",null,"正在播放",-1))]),n("div",{class:"player-controls"},[n("button",{onClick:ra,class:"control-button"},[...s[11]||(s[11]=[n("i",{class:"icon-pause"},null,-1),v(" 暂停 ",-1)])]),n("button",{onClick:va,class:"control-button"},[...s[12]||(s[12]=[n("i",{class:"icon-stop"},null,-1),v(" 停止 ",-1)])])])])):r("",!0)]))}},[["__scopeId","data-v-5e8a6470"]]);export{X as default};
