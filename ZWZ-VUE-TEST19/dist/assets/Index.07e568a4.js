import{M as a}from"./music.3b750384.js";import{_ as s}from"./index.cfbf38c0.js";import{r as e,o as r,y as t,D as i,G as l,U as n,M as d,a5 as o}from"./vendor.1112e821.js";import"./axios.468b7dd2.js";import"./element-plus.c63ee1ff.js";const c={class:"container"},u={key:0,class:"loading"},m={key:1,class:"error"},v={key:2,class:"singer-list"},f=["src","alt"],y={class:"singer-info"},g={class:"singer-name"},p={class:"singer-about"},h={key:3,class:"empty"};var A=s({__name:"Index",setup(s){const A=e([]),b=e(!1),w=e("");return r((()=>{(async()=>{b.value=!0,w.value="";try{const s=await a.RecommendSinger();if(!s)throw new Error("未收到服务器响应");if(200!==s.code&&!0!==s.success){const a=s.message||s.msg||"获取推荐歌手失败";throw new Error(a)}{let a=[];if(s.data&&Array.isArray(s.data.singers))a=s.data.singers;else if(Array.isArray(s.data))a=s.data;else if(s.list&&Array.isArray(s.list))a=s.list;else{if(!(s.data&&s.data.data&&Array.isArray(s.data.data)))throw new Error("服务器返回的数据格式无法识别");a=s.data.data}0===a.length?A.value=[]:A.value=a.filter((a=>a&&void 0!==a.id)).map((a=>({id:a.id,username:a.username||a.name||"未知歌手",avatar:a.avatar||"",about:a.about||a.description||""})))}}catch(s){w.value=s.message||"加载失败，请稍后重试"}finally{b.value=!1}})()})),(a,s)=>(t(),i("div",c,[s[0]||(s[0]=l("h2",null,"精选歌手",-1)),b.value?(t(),i("div",u," 加载中... ")):w.value?(t(),i("div",m,n(w.value),1)):A.value.length>0?(t(),i("div",v,[(t(!0),i(d,null,o(A.value,(a=>{return t(),i("div",{key:a.id,class:"singer-item"},[l("img",{src:(s=a.avatar,s?s.startsWith("http")||s.startsWith("/")?s:`/${s}`:"/music.ico"),alt:a.username,class:"singer-avatar"},null,8,f),l("div",y,[l("h3",g,n(a.username),1),l("p",p,n(a.about||"暂无简介"),1)])]);var s})),128))])):(t(),i("div",h," 暂无歌手信息 "))]))}},[["__scopeId","data-v-32dac59f"]]);export{A as default};
