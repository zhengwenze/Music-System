import{r as e,aw as t,ax as a,o as n,ac as r,y as o,D as s,G as i,R as l,E as u,F as c,W as d,z as m,Q as g,M as p,t as f,c as h,f as I,S as v,u as _,H as A,U as S,ay as E,az as b,at as R}from"./vendor.1112e821.js";import{a as x}from"./axios.468b7dd2.js";import{E as y,u as Q,e as k,c as U,a as L,d as w,b as P,f as B,g as M,h as C,i as j,j as T,k as O}from"./element-plus.c63ee1ff.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function F(){return localStorage.getItem("avatar")}function V(e){return localStorage.setItem("avatar",e)}function D(){return localStorage.removeItem("avatar")}function K(){return""}function J(e){}function G(){const e=localStorage.getItem("userId");return e?parseInt(e,10):null}function H(e){return localStorage.setItem("userId",e.toString())}function N(){return localStorage.removeItem("userId")}function Y(){return localStorage.getItem("email")}function W(e){return localStorage.setItem("email",e)}function q(){return localStorage.removeItem("email")}function X(){return localStorage.getItem("phone")}function z(e){return localStorage.setItem("phone",e)}function Z(){return localStorage.removeItem("phone")}function $(){const e=localStorage.getItem("activation");return"true"===e||"false"!==e&&e}function ee(e){return localStorage.setItem("activation",e.toString())}function te(){return localStorage.removeItem("activation")}function ae(){return localStorage.getItem("username")}function ne(e){return localStorage.setItem("username",e)}function re(){return localStorage.removeItem("username")}function oe(){return localStorage.getItem("name")}function se(){return localStorage.removeItem("name")}function ie(){const e=localStorage.getItem("userRole");return e?parseInt(e,10):0}function le(e){return localStorage.setItem("userRole",e)}function ue(){return localStorage.removeItem("userRole")}function ce(){N(),re(),ue(),se(),q(),Z(),te(),D()}function de(e){try{return!(!e||"object"!=typeof e)&&(void 0!==e.userId&&null!==e.userId?H(e.userId):void 0!==e.id&&null!==e.id&&H(e.id),void 0!==e.username&&ne(e.username),void 0!==e.role&&null!==e.role&&le(e.role),void 0!==e.email&&W(e.email),void 0!==e.phone&&z(e.phone),void 0!==e.activation&&null!==e.activation&&ee(e.activation),e.image_url&&V(e.image_url),!0)}catch(t){return!1}}function me(){try{const e=G(),t=ae(),a=ie(),n=Y(),r=X(),o=$(),s=localStorage.getItem("userId"),i=localStorage.getItem("username"),l=localStorage.getItem("userRole"),u=localStorage.getItem("email"),c=localStorage.getItem("phone"),d=localStorage.getItem("activation"),m=!!e&&!!t;return{isLoggedIn:m,isComplete:m&&null!=a,authDetails:{userId:e,username:t,role:a,email:n,phone:r,activation:o,storedUserId:s,storedUsername:i,storedRole:l,storedEmail:u,storedPhone:c,storedActivation:d}}}catch(e){return{isLoggedIn:!1,isComplete:!1,authDetails:null,error:e.message}}}var ge=Object.freeze(Object.defineProperty({__proto__:null,getAvatar:F,setAvatar:V,removeAvatar:D,getToken:K,setToken:J,removeToken:function(){},getUserId:G,setUserId:H,removeUserId:N,getEmail:Y,setEmail:W,removeEmail:q,getPhone:X,setPhone:z,removePhone:Z,getActivation:$,setActivation:ee,removeActivation:te,getUsername:ae,setUsername:ne,removeUsername:re,getName:oe,setName:function(e){return localStorage.setItem("name",e)},removeName:se,getUserRole:ie,setUserRole:le,removeUserRole:ue,clearUserInfo:ce,saveUserInfo:de,debugAuthInfo:me,isLoggedIn:function(){const e=G();return null!=e},hasPermission:function(e){const t=ie();return!e.meta||!e.meta.roles||null!=t&&e.meta.roles.includes(t)},ensureTokenForSpecialPages:function(){const e=G(),t=ae(),a=ie();return!(null==e||!t||null==a)}},Symbol.toStringTag,{value:"Module"}));const pe={admin:{baseURL:"/admin",timeout:1e4,withCredentials:!1},like:{baseURL:"/mylike",timeout:1e4,withCredentials:!1},login:{baseURL:"/login",timeout:1e4,withCredentials:!1},msg:{baseURL:"/msg",timeout:1e4,withCredentials:!1},music:{baseURL:"/music",timeout:1e4,withCredentials:!1},setting:{baseURL:"/setting",timeout:1e4,withCredentials:!1},singer:{baseURL:"/singer",timeout:1e4,withCredentials:!1},songList:{baseURL:"/songList",timeout:1e4,withCredentials:!1},upload:{baseURL:"/upload",timeout:3e4,withCredentials:!1}},fe=e=>{const t=x.create({baseURL:e.baseURL||e.path,timeout:e.timeout||1e4,withCredentials:e.withCredentials||!1});return(e=>{e.interceptors.request.use((e=>{const t=G(),a="/login"===e.url&&"post"===e.method;return!t||e.headers.id||a?e.headers.id:e.headers.id=t,e}),(e=>Promise.reject(e)))})(t),(e=>{e.interceptors.response.use((e=>{const t=e.data;if(20===t.code||!0===t.success)return e;{const a=t.message||"请求失败";return"/login"===e.config.url&&"post"===e.config.method?{data:{success:!1,code:t.code||500,message:a}}:(y({message:a,type:"error",duration:5e3}),401===t.code&&(ce(),y.error("登录已过期，请重新登录"),setTimeout((()=>{window.location.href="/login"}),1500)),Promise.reject(new Error(a)))}}),(e=>{let t="网络请求失败";if(e.response){const a=e.response.status,n=e.response.data;if(n&&n.message)t=n.message;else switch(a){case 400:t="请求参数错误";break;case 401:t="未授权，请重新登录",ce(),setTimeout((()=>{window.location.href="/login"}),1500);break;case 403:t="拒绝访问";break;case 404:t="请求地址不存在";break;case 500:t="服务器内部错误";break;default:t=`连接错误(${a})`}if(e.config&&"/login"===e.config.url&&"post"===e.config.method)return Promise.reject({...e,message:`登录失败，${t||"内部错误"}`})}else"ERR_NETWORK"===e.code?t="网络连接异常，请检查后端服务是否正常运行":"ECONNABORTED"===e.code&&(t="请求超时，请稍后重试");return y({message:t,type:"error",duration:5e3}),Promise.reject({...e,message:t})}))})(t),t},he={};for(const[nt,rt]of Object.entries(pe))he[`Mod_${nt}_service`]=fe(rt);fe({baseURL:"/",timeout:1e4,withCredentials:!1});const{Mod_admin_service:Ie,Mod_like_service:ve,Mod_login_service:_e,Mod_msg_service:Ae,Mod_music_service:Se,Mod_setting_service:Ee,Mod_singer_service:be,Mod_songList_service:Re,Mod_upload_service:xe}=he,ye=e=>_e.post("/login",e),Qe=e=>_e.post("/register",e),ke=e=>_e.get("/getInfo",{params:{userId:e}}),Ue=e=>{const t=G();return Ee.post("/setMessage",e,{headers:{id:t}})},Le=(e,t)=>{const a=G();return Ee.post("/setPassword",{},{params:{oldPassword:e,newPassword:t},headers:{id:a}})},we=async e=>{try{const t=await(e=>{const t=new FormData;return t.append("file",e),xe.post("/upImage",t).then((e=>{var t;const a=e.data||e;return a&&(!0===a.success||20===a.code)&&(null==(t=a.data)?void 0:t.url)?Promise.resolve(a.data.url):Promise.reject(new Error((null==a?void 0:a.message)||"图片上传失败"))})).catch((e=>{var t;const a=0===(null==(t=e.response)?void 0:t.status)?"网络连接异常，请确认上传服务是否正在运行在8089端口，或检查CORS配置":e.message;return Promise.reject(new Error(a))}))})(e);return{success:!0,imageUrl:t,response:await(e=>{const t=G();return Ee.post("/setIcon",null,{params:{iconUrl:String(e)},headers:{id:t}})})(t)}}catch(t){return{success:!1,message:t.message||"设置用户图片失败"}}};const Pe={key:0,class:"global-loading-container"},Be={__name:"App",setup(h){const I=e(!1);f("globalLoading",I);const v=t();a();return n((()=>{me(),(async()=>{const e=G();if(me(),e)try{const t=await ke(e);t&&t.data&&(t.data.success||20===t.data.code)&&t.data.data&&t.data.data.user?de({userId:t.data.data.user.id,username:t.data.data.user.username,role:t.data.data.user.role||2,email:t.data.data.user.email||"",phone:t.data.data.user.phone||"",activation:t.data.data.user.activation||0,image_url:t.data.data.user.image_url||""}):(ce(),"/login"!==v.currentRoute.value.path&&"/register"!==v.currentRoute.value.path&&(y.error("登录已过期，请重新登录"),v.push("/login")))}catch(t){ce(),"/login"!==v.currentRoute.value.path&&"/register"!==v.currentRoute.value.path&&(y.error("登录已过期，请重新登录"),v.push("/login"))}else"/login"!==v.currentRoute.value.path&&"/register"!==v.currentRoute.value.path&&v.push("/login")})()})),(e,t)=>{const a=r("router-view");return o(),s(p,null,[I.value?(o(),s("div",Pe,[...t[0]||(t[0]=[i("div",{class:"global-loading-spinner"},null,-1)])])):l("",!0),u(a,null,{default:c((({Component:e})=>[u(d,{name:"fade",mode:"out-in"},{default:c((()=>[(o(),m(g(e)))])),_:2},1024)])),_:1})],64)}}},Me={},Ce=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in Me)return;Me[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()};var je=(e,t)=>{const a=e.__vccOpts||e;for(const[n,r]of t)a[n]=r;return a};const Te={class:"app-wrapper"},Oe={class:"sidebar-footer"},Fe={class:"main-container"},Ve={class:"navbar"},De={class:"left"},Ke={class:"right"},Je={class:"avatar-container"},Ge={class:"user-avatar"},He=["src"],Ne={key:1,class:"avatar-placeholder"},Ye={class:"username"};var We=je({__name:"index",setup(d){const f=a(),E=t(),b=e(!1),R=e(0),x=e(ae()||"管理员");e(oe()||"");const y=e(F()||""),T=h((()=>{switch(R.value){case 0:return"管理员";case 1:return"歌手";case 2:return"用户";default:return"未知角色"}})),O=()=>{const e=ae()||"管理员";e!==x.value&&(x.value=e)};n((()=>{const e=ie();R.value="string"==typeof e?parseInt(e,10):e||0,y.value=F()||"",window.addEventListener("storage",(e=>{"username"!==e.key&&null!==e.key||O(),"avatar"===e.key&&(y.value=e.newValue||"")}))})),I((()=>{const e=setInterval((()=>{O();const e=F()||"";e!==y.value&&(y.value=e)}),500);return()=>clearInterval(e)}));const V=h((()=>f.path)),D=()=>{b.value=!b.value},K=()=>{j.confirm("确认退出登录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ce(),E.push("/login")})).catch((()=>{}))};return(e,t)=>{const a=r("el-icon"),n=r("el-menu-item"),d=r("el-menu"),f=r("el-tooltip"),h=r("el-breadcrumb-item"),I=r("el-breadcrumb"),E=r("el-dropdown-item"),j=r("el-dropdown-menu"),O=r("el-dropdown"),F=r("router-view");return o(),s("div",Te,[i("div",{class:A(["sidebar-container",{"is-collapse":b.value}])},[t[14]||(t[14]=i("div",{class:"logo-container"},[i("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAANzUlEQVR4AeydS1obxxqGq+TH6zhylJmVQVYQWEnELhxNjCeydwFZCWQFGQRmkdHZhm1U+b9uNSCB6Fvd69OjRqhVXZf3r1dV1Y3ERPFGAiRwlAAFOYqGL5CAUhSEvYAEXiFAQV6BE8tLf08/TG9ny0Wz/fPzhxPsi6V+OdeDgkQaXQhw+9Py481sad6+mdwZpS6aTZvJley7wuuRVj+bajkUJBtGXhsCMW5mf0CAO6PVuTp+m+J1EeiOohyHNPYVCjKWoMXjMXWSkeFOKX2iut8gyoKSdAfWJyUF6UPLYVrIoWXqNLAISjIQXNthFKSNkIfXMa0aIUdTw0oSiNbs4ON4AhRkPMPRObx9oy9GZ1JnMBXRbOVV51j4zzQFySho9Tt+rzVHW+unsnCnJG2UOr5OQTqCcpVMG/3RQd5ctFuCSkEsgRyejdXR46Eacgp4UY9OD7v4ywACFGQANFuHOO7AXI9YCBQFsQBxaBYTM5kOPbbjcVyPdAR1LNnk2Aul7vfabqP+56G8xe1sufBQTpZFUJCAYZV1gusRpGqdUeojrrVUT/ijFwEK0guX7cTGiyBS6+nbN5MreeS9JwEK0hNYwsm5HhkQPAoyAJq9Q7SvEaSpMtcjDYmOjxSkIygLyaLIwsh6xPHp5SjaaasSFMQWyXTyqa6PcNHeLWAUpBun3FJVi3ZK0h5WCtLOKNcUlSS5Ns5WuyiILZJp5oMzW3dpVt1PrSmIH86OSxmVPSThn8cfQUhBjoApbPfiZvYHLyS+EHQK8gKUMnfpk5vZ8o4L9/3oU5B9HqU/qxbu/IaUx25AQR5Z8LeaAL784ZyS1DAoSM2BPw8IGK3OZcp1oQ72l/aUgpQW8X7tlcV72esSCtKvw5SYuuh1CQUpscv3b3O1LpEpV3FnuShI/85S8hHFjSYUpOTuPqztzWhyMfaaybDi/R5FQfzyzqm0BT7GK9OurEWhIDl1Wf9twSciK1FyvW5CQfx3KlclbrRR51qpM6XUpfJ7a6Zdd7mNKBTEb0dyVJq5nq9X795/XX16v15dyu9n3++376SwjWw+782IUomSw0d7KYjP7uOorPn68+lh1r9uvmxEklOMKoeveXq+0GZyJSNKiH8RZ62JFMQaymAZHZ1OQRKMKgElAZSH6VeK6xQKghAmvEnnb51GRSAJCCcpCgVB6MJtmLOPK12r/3fJIBJJUNWkRKEgCFkhW0SSgPijKBF/uTYFQagK2ipJ6lPBsbR6apS6wGI+xivzzwWJBRvr4YwATgXvrpc4K2NAxlH+nRcFGRDJHA6BJHIaOMS1ktfwTfFBrZjOdlGQ18KV+Ws4DSyS4BpK65kwnyggSSxTLgriM/IRltVIIqeLzyOrXjXlCr0uoSCR9YoQ1YEk37bbP2OVJASTpkyvgjSF8jE+ApCkOsNlVHQjCaZbKtCNggQCH2uxkETWJdEt3kN98yMFibWnBqwXRhORJOQfOr7Q+uqbH71/hzAFeSEU3KUUJMFoYvQ2prNc3v+FHAWhDa8S+OXfL9fVaFJffQ9+Oliuunv9l9a5CPJqkPniOALVaLJeXVaiVIt4cz0ux1FHy+lf7W2qRUFGxaqsgytRvq4+4QNaIgsW8kc/i+KWjD7xdbWdgriNZLa5Q5b5elV9tHe3ThFZ/I0scrV94eMjvRQk2y7sp2EQBesUyDJffz7FyLL7Q0jXwuC/9f7uupUUxDXhwvKHMPhDyLmMLvNnwliHcWI9x4MMKcgBkOdPuWcMgafCPI4u1qZiU9fTLAoyJvo8theBR1k+n+6mYaNPG2szcTrNoiC9QszEtghgGiYjio2r9U6nWRTEVsSZT28C1Ygip411dW2l9+HNAU6nWRSkwczHYATwJy0jJXFWdwriDG2HjJnkgcAYSSbbyW8PGVn+hYJYBsrshhPAh7bk6NELd8nD2p2CWEPJjMYSwJpEzm596puPXFUf/wV8RwqlIEfAcHcYAt/ut9dK9b1OYihImHCxVN8EqlHEaJGkT8na2bSMI0ifOCSUNuWq7tYiUTSBgkQRBlbiKQGMIn2mWXKKmCPIU4D8nQT2CHT8hvu9Yzo+4QjSERST+SWge6xDtnrLEcRveFhaaALbyfavrnXA51G6pu2bjiNIX2JM74XAjx+q66hwqRzeKIhDuMx6OIF6od5+vFaq80jTntvzFBTkORPuiYaAab0eUl9YdFdhCuKOLXMeSaDDQv2y60gztCoUZCg5HuecQNtC/fv9tvffbfWtNAXpS4zpHRLYz3q3UD+2WHc+eqA2FAQUuEVJANMnWYS/NEps5uvVmY9KUxAflFnGYAL1InxvsQ458K2Og/PscyAF6UOLab0TwCjy/d6cyUhypo06l5HDmxxoLAUBBW5RE4Ak+BYUfCzXd0UpiG/iLC8MgYGlUpCB4HhYGQQoSBlxZisHEqAgA8HxsDIIUJAy4sxWDiRAQQaC42FlEOgiSBkk2EoSeIEABXkBSkq7XH7cNCUOrupKQVyRZb5ZEKAgWYSRjXBFgIK4Ist8syAQWJAsGLIRGROgIBkHl00bT4CCjGfIHDImQEEyDi6bNp4ABRnPkDlkTCBfQTIOGpvmjwAF8ceaJSVIgIIkGDRW2R8BCuKPNUtKkAAFSTBorLI/AhRkAGseUg4BClJOrNnSAQQoyABoPKQcAhSknFizpQMIUJAB0HhIOQQoSFyxZm0iI0BBIgsIqxMXAQoSVzxYm8gIUJDIAsLqxEWAgsQVD9YmMgIUJLKAuKsOcx5CgIIMocZjiiFAQYoJNRs6hAAFGUKNxxRDgIIUE2o2dAgBCjKEGo/ZJ5DxMwpyENy/px+m//z84eR2tlzc/rT8uLdh35MN6bAdZMGnGREoUpAHCUSAm9ny4mb2x5U8Gmxv30zutJlcGaUujFbnexv2PdmQDhuOk+1ul8/FrUhEcfKwpBhBIAVGgxuR4UECEUDCuFBKn6jxt6mq81lArp04lTQol8KoJG/ZCtIIgc4p7+4GUmA0UHUnVp5ulTQo91GY5QVl8UTfQjHZCdKI0QiBzmmBk60sRBi1aGRRvLUSCJ0gG0F2I8VdI0ZosB3KhywdkjFJSALJC4IRA+uK3UjBTheyN2VYdrKCQAyMGhgxlN91heKtHAJJCoJFLsTYjRrlRIst9U4gOUEwamCR650UC8yNQKf2JCMIplRP1hqdGsdEJDCWQBKCQA5MqRTXGoo3vwSiF6RZb/jFwtJIoCYQtSCQg+uNOlD8GYZAtIJQjjAdgqXuExgmyH4e1p9hzcGRwzpWZjiAQHSCQA5ZkF8NaAsPIQHrBKIT5O0bfSGt5J+MCATewxOISpCb2VLksPLZjPBkWYMsCEQjCBblQnQhG+8kEA2BaATRRn8EFW4kEBOBKAS5nS1l5ODUKqaOwbrUBKIQxCjF0aOOB39GRiC4ILu1B89aRdYxWJ2aQHBBtJn8XleFP0kgPgLBBREkNr5yR7JpvTMBCfQmEFQQTq96x4sHeCYQVJCJmXDt4TngLK4fgUm/5EwdG4EfP9RG8eaMQFBB5PTub85axoxJwAKBoIJYqH8kWbAauRKgIIlH9tfNF06xHMaQgjiEy6zTJxBUEG0U3/3UqBv5jcLXfnBQQdqrxxQtBK5bXufLIwkEFWQ72f41sv75H/5KC7VS5PcKHxsvBRWE5/DHhfDb/ZYjyDiErUcHFaQ+A2MY5NYwvZyg5vfya9xrh0BQQdAEbTQFAYj+22X/Q3hEXwLBBeE6pG/I6vSa648ahOOfwQX55d8vMoJwmtU3zu/Xq9EjSN8yS0wfXBBA10r/iUdu3Qhoo84Vb14IRCEIz8b0i/W37ZZvKP2QDU4dhSA4G8N3xc4xvASvzqmZcBSBKARBC3bvivzTCcB4ZTOao8creKy/FI0geFfUSn2y3sKMMsQoW5/UiL5R2VQwGkFAtD4zwzNaYPF8M9fvv674BvIcjNM9UQmCln6/N2fyyKmWQHhy38zXn0+fPOevnghEJwimWt/vt+wMTzqArDvwpvFkD3/1RSA6QdBwSCLrEXYKgcF1h0AIeI9SEPDAegSdA7+XuqH9XHccRt/v82gFAQZ0jlJHErQb7QcHbuEIRC0IsFQjiVJFTbdkzXGKdqP93MISiF4Q4EFnkYX7O/k997NbG8jBax0S6UjuSQgCVli4iySnmJfjeYbbBu2jHHFFNhlBgA2SYF6emSQbtGe+Xr1D+9BOboEIvFBsUoI09Yck8m4rU660r7o3YqA9Tdv4GBeBJAUBQrzbzuXqMs72yPPE1ibmGoJTDIlc5PdkBWm47hbwqaxNqkU4xIbgTRv4GC+B5AUBWnQ2vBvjXbkeUeKaemEqhbrNZZ3BRTgils6WhSAN7kqU9epyLlMvdEjZH+pz2zLlM9cQY75eaciLukl9eE+MgC1Boms2OqR0zjOIgmsL6KxKmWtHFX0QAmVJue/mIinEcFQes/VEIFtBGn4QBdMadFZ02gdh6qvzGGFkaxVHBFCyVekuIRu2nQx6LlOn+U4IlKV4y4ZA9oIcRupBmGoqtjqbr7F9PpVHdPRjm4wIK9mqdGeQDRtlOKSb3/PiBMkvhGyRSwIUxCVd5p08gQQESZ4xG5AwAQqScPBYdfcEKIh7xiwhYQIUJOHgseruCVAQ94xZQsIEyhYk4cCx6n4IUBA/nFlKogQoSKKBY7X9EKAgfjizlEQJUJBEA8dq+yFAQRxxZrZ5EPgPAAD///k7ZOQAAAAGSURBVAMAVwY3zZHnPv4AAAAASUVORK5CYII=",alt:"音乐图标",class:"logo-icon"}),i("span",{class:"title"},"悦享音乐")],-1)),u(d,{"default-active":V.value,class:"sidebar-menu",collapse:b.value,"background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#ffb600","unique-opened":"",router:""},{default:c((()=>[0===R.value?(o(),s(p,{key:0},[u(n,{index:"/admin/userManage"},{title:c((()=>[...t[0]||(t[0]=[v("用户管理",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(Q))])),_:1})])),_:1}),u(n,{index:"/admin/singerManage"},{title:c((()=>[...t[1]||(t[1]=[v("歌手管理",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(Q))])),_:1})])),_:1}),u(n,{index:"/admin/musicManage"},{title:c((()=>[...t[2]||(t[2]=[v("歌曲管理",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(Q))])),_:1})])),_:1}),u(n,{index:"/admin/message"},{title:c((()=>[...t[3]||(t[3]=[v("消息中心",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(Q))])),_:1})])),_:1}),u(n,{index:"/admin/profile"},{title:c((()=>[...t[4]||(t[4]=[v("个人信息",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(Q))])),_:1})])),_:1})],64)):l("",!0),1===R.value?(o(),s(p,{key:1},[u(n,{index:"/singer/uploadMusic"},{title:c((()=>[...t[5]||(t[5]=[v("发布音乐",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(k))])),_:1})])),_:1}),u(n,{index:"/singer/musicManage"},{title:c((()=>[...t[6]||(t[6]=[v("歌曲管理",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(U))])),_:1})])),_:1}),u(n,{index:"/singer/message"},{title:c((()=>[...t[7]||(t[7]=[v("消息中心",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(L))])),_:1})])),_:1}),u(n,{index:"/singer/profile"},{title:c((()=>[...t[8]||(t[8]=[v("个人信息",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(Q))])),_:1})])),_:1})],64)):l("",!0),2===R.value?(o(),s(p,{key:2},[u(n,{index:"/user/hotMusic",class:"student-menu-item"},{title:c((()=>[...t[9]||(t[9]=[v("热门推荐",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(w))])),_:1})])),_:1}),u(n,{index:"/user/mySongList",class:"student-menu-item"},{title:c((()=>[...t[10]||(t[10]=[v("我的歌单",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(U))])),_:1})])),_:1}),u(n,{index:"/user/likeMusic",class:"student-menu-item"},{title:c((()=>[...t[11]||(t[11]=[v("收藏音乐",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(U))])),_:1})])),_:1}),u(n,{index:"/user/message",class:"student-menu-item"},{title:c((()=>[...t[12]||(t[12]=[v("消息中心",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(P))])),_:1})])),_:1}),u(n,{index:"/user/profile",class:"student-menu-item"},{title:c((()=>[...t[13]||(t[13]=[v("个人信息",-1)])])),default:c((()=>[u(a,null,{default:c((()=>[u(_(Q))])),_:1})])),_:1})],64)):l("",!0)])),_:1},8,["default-active","collapse"]),i("div",Oe,[u(f,{content:b.value?"展开":"收起",placement:"right"},{default:c((()=>[i("div",{class:"collapse-btn",onClick:D},[b.value?(o(),m(a,{key:0},{default:c((()=>[u(_(B))])),_:1})):(o(),m(a,{key:1},{default:c((()=>[u(_(M))])),_:1}))])])),_:1},8,["content"])])],2),i("div",Fe,[i("div",Ve,[i("div",De,[u(I,{separator:"/"},{default:c((()=>[u(h,{to:{path:"/"}},{default:c((()=>[...t[15]||(t[15]=[v("首页",-1)])])),_:1}),e.$route.meta.title?(o(),m(h,{key:0},{default:c((()=>[v(S(e.$route.meta.title),1)])),_:1})):l("",!0)])),_:1})]),i("div",Ke,[u(O,{trigger:"click"},{dropdown:c((()=>[u(j,null,{default:c((()=>[u(E,{onClick:K},{default:c((()=>[...t[16]||(t[16]=[v("退出登录",-1)])])),_:1})])),_:1})])),default:c((()=>[i("div",Je,[i("div",Ge,[y.value?(o(),s("img",{key:0,src:y.value,alt:"用户头像",class:"avatar-img"},null,8,He)):(o(),s("div",Ne,S(x.value.charAt(0)),1))]),i("span",Ye,S(T.value?T.value+" ("+x.value+")":x.value),1),u(a,null,{default:c((()=>[u(_(C))])),_:1})])])),_:1})])]),i("div",{class:A(["app-main",{"full-screen":e.$route.meta.fullscreen}])},[u(F,null,{default:c((({Component:e})=>[(o(),m(g(e)))])),_:1})],2)])])}}},[["__scopeId","data-v-6863a3b4"]]);const qe=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:()=>Ce((()=>import("./index.1b4698c0.js")),["assets/index.1b4698c0.js","assets/index.6d262c9e.css","assets/vendor.1112e821.js","assets/element-plus.c63ee1ff.js","assets/axios.468b7dd2.js"]),meta:{title:"登录"}},{path:"/register",name:"Register",component:()=>Ce((()=>import("./index.df6f50ca.js")),["assets/index.df6f50ca.js","assets/index.0642c480.css","assets/vendor.1112e821.js","assets/element-plus.c63ee1ff.js","assets/axios.468b7dd2.js"]),meta:{title:"注册"}},{path:"/user",component:We,redirect:"/user/hotMusic",meta:{title:"用户端",role:"user"},children:[{path:"profile",name:"Profile",component:()=>Ce((()=>import("./Index.265b580c.js")),["assets/Index.265b580c.js","assets/Index.f45a2360.css","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js","assets/axios.468b7dd2.js"]),meta:{title:"个人信息"}},{path:"hotMusic",name:"HotMusic",component:()=>Ce((()=>import("./Index.ff0de90e.js")),["assets/Index.ff0de90e.js","assets/Index.7bebb169.css","assets/vendor.1112e821.js","assets/mylike.b9b8a089.js","assets/music.3b750384.js","assets/element-plus.c63ee1ff.js","assets/axios.468b7dd2.js"]),meta:{title:"热门推荐"}},{path:"ranking",name:"UserRanking",component:()=>Ce((()=>import("./Index.3c4fb4bc.js")),["assets/Index.3c4fb4bc.js","assets/Index.8627e38b.css","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"歌曲排行"}},{path:"featuredSinger",name:"FeaturedSinger",component:()=>Ce((()=>import("./Index.07e568a4.js")),["assets/Index.07e568a4.js","assets/Index.5a1ae6ce.css","assets/music.3b750384.js","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"精选歌手"}},{path:"mySongList",name:"UserMySongList",component:()=>Ce((()=>import("./Index.bb901ca3.js")),["assets/Index.bb901ca3.js","assets/Index.fa520947.css","assets/vendor.1112e821.js","assets/songList.fbb575fc.js","assets/music.3b750384.js","assets/upload.2e887d46.js","assets/axios.468b7dd2.js","assets/mylike.b9b8a089.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"我的歌单"}},{path:"likePlaylist",name:"LikePlaylist",component:()=>Ce((()=>import("./Index.ae4c83e2.js")),["assets/Index.ae4c83e2.js","assets/Index.9482ef03.css","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"收藏歌单"}},{path:"likeMusic",name:"LikeMusic",component:()=>Ce((()=>import("./Index.bbb931b8.js")),["assets/Index.bbb931b8.js","assets/Index.4663240d.css","assets/mylike.b9b8a089.js","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js","assets/axios.468b7dd2.js"]),meta:{title:"收藏音乐"}},{path:"message",name:"UserMessage",component:()=>Ce((()=>import("./Index.e1773256.js")),["assets/Index.e1773256.js","assets/Index.b9d72bba.css","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js","assets/msg.2d383b74.js","assets/axios.468b7dd2.js"]),meta:{title:"消息通知"}}]},{path:"/singer",component:We,redirect:"/singer/uploadMusic",meta:{title:"歌手端",role:"singer"},children:[{path:"profile",name:"SingerProfile",component:()=>Ce((()=>import("./Index.25c89a3a.js")),["assets/Index.25c89a3a.js","assets/Index.2fd7a326.css","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js","assets/axios.468b7dd2.js"]),meta:{title:"个人信息"}},{path:"uploadMusic",name:"UploadMusic",component:()=>Ce((()=>import("./Index.d0f2fc9c.js")),["assets/Index.d0f2fc9c.js","assets/Index.4df50ff5.css","assets/singer.7d3633a2.js","assets/upload.2e887d46.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js"]),meta:{title:"上传音乐"}},{path:"musicManage",name:"SingerMusicManage",component:()=>Ce((()=>import("./Index.120355e2.js")),["assets/Index.120355e2.js","assets/Index.7d5faab2.css","assets/singer.7d3633a2.js","assets/upload.2e887d46.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js"]),meta:{title:"歌曲管理",role:"singer"}},{path:"hotMusic",name:"SingerHotMusic",component:()=>Ce((()=>import("./Index.8c58b6d8.js")),["assets/Index.8c58b6d8.js","assets/Index.2baddb39.css","assets/vendor.1112e821.js","assets/mylike.b9b8a089.js","assets/music.3b750384.js","assets/element-plus.c63ee1ff.js","assets/axios.468b7dd2.js"]),meta:{title:"热门推荐"}},{path:"ranking",name:"SingerRanking",component:()=>Ce((()=>import("./Index.8a8da4df.js")),["assets/Index.8a8da4df.js","assets/Index.bc7ce758.css","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"歌曲排行"}},{path:"mySongList",name:"SingMySongList",component:()=>Ce((()=>import("./Index.9519bde2.js")),["assets/Index.9519bde2.js","assets/Index.979405d1.css","assets/vendor.1112e821.js","assets/songList.fbb575fc.js","assets/music.3b750384.js","assets/upload.2e887d46.js","assets/axios.468b7dd2.js","assets/mylike.b9b8a089.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"我的歌单"}},{path:"likeSongList",name:"SingerLikeSongList",component:()=>Ce((()=>import("./Index.dbe5ecad.js")),["assets/Index.dbe5ecad.js","assets/Index.7957208f.css","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"收藏歌单"}},{path:"likeMusic",name:"SingerLikeMusic",component:()=>Ce((()=>import("./Index.43ef1071.js")),["assets/Index.43ef1071.js","assets/Index.d6d3fc4d.css","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"收藏音乐"}},{path:"message",name:"SingerMessage",component:()=>Ce((()=>import("./Index.896ffcac.js")),["assets/Index.896ffcac.js","assets/Index.6438c26c.css","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js","assets/msg.2d383b74.js","assets/axios.468b7dd2.js"]),meta:{title:"消息通知"}},{path:"detail",name:"SingerDetail",component:()=>Ce((()=>import("./Index.fdf92782.js")),["assets/Index.fdf92782.js","assets/Index.edbe510a.css","assets/vendor.1112e821.js","assets/singer.7d3633a2.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"歌手详情"}}]},{path:"/admin",component:We,redirect:"/admin/userManage",meta:{title:"管理员端",role:"admin"},children:[{path:"profile",name:"AdminProfile",component:()=>Ce((()=>import("./Index.c75447de.js")),["assets/Index.c75447de.js","assets/Index.59578bee.css","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js","assets/axios.468b7dd2.js"]),meta:{title:"个人信息"}},{path:"userManage",name:"UserManage",component:()=>Ce((()=>import("./Index.512d7d70.js")),["assets/Index.512d7d70.js","assets/Index.f3ece6c2.css","assets/vendor.1112e821.js","assets/admin.d2f1ae71.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"用户管理"}},{path:"singerManage",name:"SingerManage",component:()=>Ce((()=>import("./Index.878f9bce.js")),["assets/Index.878f9bce.js","assets/Index.f24015d6.css","assets/vendor.1112e821.js","assets/admin.d2f1ae71.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"歌手管理"}},{path:"musicManage",name:"MusicManage",component:()=>Ce((()=>import("./Index.d648b236.js")),["assets/Index.d648b236.js","assets/Index.f21b1ec9.css","assets/vendor.1112e821.js","assets/admin.d2f1ae71.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js","assets/upload.2e887d46.js"]),meta:{title:"音乐管理"}},{path:"message",name:"AdminMessage",component:()=>Ce((()=>import("./Index.d5acaadc.js")),["assets/Index.d5acaadc.js","assets/Index.d92a5b67.css","assets/element-plus.c63ee1ff.js","assets/vendor.1112e821.js","assets/msg.2d383b74.js","assets/axios.468b7dd2.js"]),meta:{title:"消息中心"}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>Ce((()=>import("./404.dbece34a.js")),["assets/404.dbece34a.js","assets/404.1649d198.css","assets/vendor.1112e821.js","assets/axios.468b7dd2.js","assets/element-plus.c63ee1ff.js"]),meta:{title:"页面不存在"}}],Xe=E({history:b(),routes:qe,scrollBehavior:(e,t,a)=>a||{top:0}});Xe.beforeEach(((e,t,a)=>{document.title=e.meta.title?`${e.meta.title} - 悦享音乐`:"悦享音乐";const n=!["/login","/register"].includes(e.path),r=G(),o=ie();if(n&&!r)return y.warning("请先登录"),a("/login");if(n&&e.meta.role){const t={0:"admin",1:"singer",2:"user"}[o]||o;if(e.meta.role!==t)return 0===o?a("/admin/profile"):1===o?a("/singer/profile"):2===o?a("/user/profile"):(ce(),y.error("权限不足，请重新登录"),a("/login"))}if(r&&("/login"===e.path||"/register"===e.path)){if(0===o)return a("/admin/profile");if(1===o)return a("/singer/profile");if(2===o)return a("/user/profile")}if(r&&"/"===e.path){if(0===o)return a("/admin/profile");if(1===o)return a("/singer/profile");if(2===o)return a("/user/profile")}a()}));async function ze(){return!1}function Ze(){ae(),ie();const e=localStorage.getItem("Authorization");return e&&(e.replace("Bearer ",""),localStorage.removeItem("Authorization")),me()}function $e(e,t="student1",a="student"){if(e)return t&&localStorage.setItem("username",t),a&&localStorage.setItem("userRole",a),me()}window.tokenDebug={checkTokenValidity:ze,fixTokenIssues:Ze,forceSetToken:$e,debugAuthInfo:me};var et={checkTokenValidity:ze,fixTokenIssues:Ze,forceSetToken:$e};const tt={handler:e=>{if(e.url&&(e.url.startsWith("http://")||e.url.startsWith("https://"))){const t={"http://localhost:8081":"/admin","http://localhost:8082":"/like","http://localhost:8083":"/login","http://localhost:8084":"/msg","http://localhost:8085":"/music","http://localhost:8086":"/setting","http://localhost:8087":"/singer","http://localhost:8088":"/songList","http://localhost:8089":"/upload"};for(const[a,n]of Object.entries(t))if(e.url.startsWith(a)){e.url=e.url.replace(a,n);break}}return e},errorHandler:e=>Promise.reject(e)};const at=R(Be);for(const[nt,rt]of Object.entries(T))at.component(nt,rt);me(),et.fixTokenIssues(),x.interceptors.request.use(tt.handler,tt.errorHandler),at.use(Xe),at.use(O,{locale:{name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值",alphaDescription:"透明度 {alpha}, 当前颜色 {color}",hueLabel:"选择色相值",hueDescription:"色相 {hue}, 当前颜色 {color}",svLabel:"选择饱和度与明度的值",svDescription:"饱和度 {saturation}, 明度 {brightness}, 当前颜色 {color}",predefineDescription:"选择 {value} 作为颜色"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},mention:{loading:"加载中"},dropdown:{toggleDropdown:"切换下拉选项"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计",selectAllLabel:"选择所有行",selectRowLabel:"选择当前行",expandRowLabel:"展开当前行",collapseRowLabel:"收起当前行",sortLabel:"按 {column} 排序",filterLabel:"按 {column} 过滤"},tag:{close:"关闭此标签"},tour:{next:"下一步",previous:"上一步",finish:"结束导览",close:"关闭此对话框"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}},size:"default"}),at.mount("#app");export{ve as M,je as _,ke as a,we as b,Le as c,me as d,Ce as e,Se as f,G as g,be as h,Ie as i,Re as j,Ae as k,ye as l,Ee as m,ge as n,Qe as r,de as s,Ue as u};
