import{aw as e,r as l,j as a,ac as r,y as s,D as o,G as d,E as u,F as t,S as i}from"./vendor.1112e821.js";import{_ as n,r as m}from"./index.cfbf38c0.js";import{E as p}from"./element-plus.c63ee1ff.js";import"./axios.468b7dd2.js";const c={class:"register-container"},g={class:"register-box"};var f=n({__name:"index",setup(n){const f=e(),w=l(null),h=l(!1),v=a({username:"",email:"",phone:"",password:"",confirmPassword:"",role:"user"}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],password:[{validator:(e,l,a)=>{""===l?a(new Error("请输入密码")):(""!==v.confirmPassword&&w.value.validateField("confirmPassword"),a())},trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{validator:(e,l,a)=>{""===l?a(new Error("请再次输入密码")):l!==v.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},_=async()=>{var e;try{await w.value.validate(),h.value=!0;try{const l={user:"2",singer:"1",admin:"0"},a={username:v.username,email:v.email,phone:v.phone,password:v.password,role:l[v.role]||"2"},r=await m(a);p.success((null==(e=r.data)?void 0:e.message)||"注册成功，请登录"),f.push("/login")}catch(l){p.error(l.message||"注册失败，请检查网络连接或联系管理员")}finally{h.value=!1}}catch(l){h.value=!1}},V=()=>{f.push("/login")};return(e,l)=>{const a=r("el-input"),n=r("el-form-item"),m=r("el-option"),p=r("el-select"),f=r("el-button"),y=r("el-link"),x=r("el-col"),P=r("el-row"),k=r("el-form");return s(),o("div",c,[l[17]||(l[17]=d("div",{class:"background"},[d("div",{class:"shape"}),d("div",{class:"shape"})],-1)),d("div",g,[l[15]||(l[15]=d("div",{class:"register-title"},[d("h3",null,"Music Dreamer 悦享音乐")],-1)),u(k,{ref_key:"registerFormRef",ref:w,model:v,rules:b,class:"register-form"},{default:t((()=>[l[9]||(l[9]=d("label",{for:"username"},"用户名",-1)),u(n,{prop:"username"},{default:t((()=>[u(a,{modelValue:v.username,"onUpdate:modelValue":l[0]||(l[0]=e=>v.username=e),placeholder:"请输入用户名",class:"glass-input"},null,8,["modelValue"])])),_:1}),l[10]||(l[10]=d("label",{for:"email"},"邮箱",-1)),u(n,{prop:"email"},{default:t((()=>[u(a,{modelValue:v.email,"onUpdate:modelValue":l[1]||(l[1]=e=>v.email=e),placeholder:"请输入邮箱",class:"glass-input"},null,8,["modelValue"])])),_:1}),l[11]||(l[11]=d("label",{for:"phone"},"手机号",-1)),u(n,{prop:"phone"},{default:t((()=>[u(a,{modelValue:v.phone,"onUpdate:modelValue":l[2]||(l[2]=e=>v.phone=e),placeholder:"请输入手机号",class:"glass-input"},null,8,["modelValue"])])),_:1}),l[12]||(l[12]=d("label",{for:"password"},"密码",-1)),u(n,{prop:"password"},{default:t((()=>[u(a,{modelValue:v.password,"onUpdate:modelValue":l[3]||(l[3]=e=>v.password=e),type:"password",placeholder:"请输入密码","show-password":"",class:"glass-input"},null,8,["modelValue"])])),_:1}),l[13]||(l[13]=d("label",{for:"confirmPassword"},"确认密码",-1)),u(n,{prop:"confirmPassword"},{default:t((()=>[u(a,{modelValue:v.confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=e=>v.confirmPassword=e),type:"password",placeholder:"请再次输入密码","show-password":"",class:"glass-input"},null,8,["modelValue"])])),_:1}),l[14]||(l[14]=d("label",{for:"role"},"角色",-1)),u(n,{prop:"role"},{default:t((()=>[u(p,{modelValue:v.role,"onUpdate:modelValue":l[5]||(l[5]=e=>v.role=e),placeholder:"请选择角色",class:"glass-input",style:{width:"100%"}},{default:t((()=>[u(m,{label:"用户",value:"user"}),u(m,{label:"歌手",value:"singer"}),u(m,{label:"管理员",value:"admin"})])),_:1},8,["modelValue"])])),_:1}),u(n,null,{default:t((()=>[u(f,{type:"primary",class:"register-button",loading:h.value,onClick:_},{default:t((()=>[...l[6]||(l[6]=[i(" 注册 ",-1)])])),_:1},8,["loading"])])),_:1}),u(n,null,{default:t((()=>[u(P,{gutter:20,class:"register-row"},{default:t((()=>[u(x,{span:24,class:"text-center"},{default:t((()=>[l[8]||(l[8]=d("span",null,"已有账号? ",-1)),u(y,{type:"primary",onClick:V,class:"login-link"},{default:t((()=>[...l[7]||(l[7]=[i("立即登录",-1)])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),l[16]||(l[16]=d("div",{class:"register-footer"},[d("p",null,"© 2025 Music Dreamer 悦享音乐 版权所有")],-1))])])}}},[["__scopeId","data-v-63f58080"]]);export{f as default};
