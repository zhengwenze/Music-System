import{_ as e}from"./index.cfbf38c0.js";import{r as a,w as l,o as u,y as t,D as v,G as r,U as s,I as o}from"./vendor.1112e821.js";import"./axios.468b7dd2.js";import"./element-plus.c63ee1ff.js";const n={class:"simple-aplayer"},i=["src"],d={class:"player-controls"},c={class:"progress-container"},p={class:"time-display"},m={class:"volume-container"};var y=e({__name:"musicPlayer",props:{audioUrl:{type:String,required:!0,default:""},autoplay:{type:Boolean,default:!1,required:!1}},setup(e,{expose:y}){const f=e,g=a(null),h=a(!1),b=a(0),T=a(0),k=a(0),x=a(100),C=a(!1),M=()=>{h.value?g.value.pause():g.value.play()},_=()=>{b.value=g.value.currentTime,T.value=g.value.duration||0,k.value=b.value/T.value*100||0},w=()=>{h.value=!1,b.value=0,k.value=0},S=e=>{const a=e.currentTarget.getBoundingClientRect(),l=(e.clientX-a.left)/a.width,u=l*T.value;g.value.currentTime=u,b.value=u,k.value=100*l,h.value||g.value.play()},U=()=>{C.value=!C.value,g.value.muted=C.value},j=e=>{const a=e.currentTarget.getBoundingClientRect(),l=Math.max(0,Math.min(100,(e.clientX-a.left)/a.width*100));x.value=l,g.value.volume=l/100,C.value=0===l,g.value.muted=C.value},B=e=>{if(!e||isNaN(e))return"00:00";const a=Math.floor(e/60),l=Math.floor(e%60);return`${a.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`};return l((()=>f.audioUrl),(e=>{e&&(b.value=0,T.value=0,k.value=0,h.value=!1)})),u((()=>{f.autoplay&&f.audioUrl&&g.value.play().catch((e=>{}))})),y({play:()=>{var e;return null==(e=g.value)?void 0:e.play()},pause:()=>{var e;return null==(e=g.value)?void 0:e.pause()},seekTo:e=>{g.value&&(g.value.currentTime=e)},setVolumeLevel:e=>{g.value&&(x.value=Math.max(0,Math.min(100,e)),g.value.volume=x.value/100,C.value=0===x.value,g.value.muted=C.value)}}),(a,l)=>(t(),v("div",n,[r("audio",{ref_key:"audioRef",ref:g,src:e.audioUrl,onPlay:l[0]||(l[0]=e=>h.value=!0),onPause:l[1]||(l[1]=e=>h.value=!1),onTimeupdate:_,onEnded:w,style:{display:"none"}},null,40,i),r("div",d,[r("button",{class:"control-btn",onClick:M},s(h.value?"æš‚åœ":"æ’­æ”¾"),1),r("div",c,[r("div",{class:"progress-bar",onClick:S},[r("div",{class:"progress-filled",style:o({width:k.value+"%"})},null,4)])]),r("div",p,s(B(b.value))+" / "+s(B(T.value)),1),r("div",m,[r("button",{class:"control-btn",onClick:U},s(C.value?"ğŸ”‡":"ğŸ”Š"),1),r("div",{class:"volume-bar",onClick:j},[r("div",{class:"volume-filled",style:o({width:x.value+"%"})},null,4)])])])]))}},[["__scopeId","data-v-53956290"]]);export{y as default};
