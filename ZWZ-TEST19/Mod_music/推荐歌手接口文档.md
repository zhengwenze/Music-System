# 推荐歌手接口文档

## 1. 接口概述
music模块，推荐歌手接口，
该接口用于获取系统推荐的歌手列表，为用户提供个性化的歌手推荐服务。
## 2. 接口详情
### 2.1 接口路径
`/music/RecommendSinger`

### 2.2 请求方式
`GET`

### 2.3 请求参数
无

### 2.4 数据来源
从数据库查询真实的歌手数据

### 2.5 推荐逻辑
- 查询 `role=1`（歌手角色）且 `activation=1`（已激活）的用户
- 随机排序并返回前10条记录

### 2.6 响应参数
| 参数名 | 类型 | 描述 |
| :--- | :--- | :--- |
| code | Integer | 响应状态码，成功为20 |
| message | String | 响应消息 |
| success | Boolean | 响应状态，成功为true |
| data | Object | 响应数据 |
| data.list | Array | 歌手列表 |
| data.list[].id | Integer | 歌手ID |
| data.list[].username | String | 歌手用户名 |
| data.list[].role | Integer | 用户角色，歌手为1 |
| data.list[].imageUrl | String | 歌手头像URL |
| data.list[].about | String | 歌手简介 |
| data.list[].createTime | String | 创建时间 |
| data.list[].email | String | 歌手邮箱 |
| data.list[].phone | String | 歌手电话 |

### 2.7 示例响应
```json
{
  "code": 20,
  "message": "获取推荐歌手成功",
  "success": true,
  "data": {
    "list": [
      {
        "id": 170,
        "username": "singer166",
        "password": "37c0463330c2001015600fe4a02b2367",
        "email": "singer11551@qq.com",
        "phone": "18111227169",
        "role": 1,
        "activation": 1,
        "createTime": "2025-12-28",
        "imageUrl": "",
        "about": ""
      },
      {
        "id": 40,
        "username": "singer010",
        "password": "3d2172418ce3c60bba369f28e399c30a",
        "email": "singer010@example.com",
        "phone": "18100000010",
        "role": 1,
        "activation": 1,
        "createTime": "2025-12-25",
        "imageUrl": "http://localhost:8089/file/image/f6f4a7c4-c47e-426d-90de-4a80f2f392e0.png",
        "about": "歌手简介010"
      }
      // 更多歌手数据...
    ]
  }
}
```

### 2.8 错误码说明
| 错误码 | 描述 |
| :--- | :--- |
| 20 | 获取推荐歌手成功 |

## 3. 实现代码

### 3.1 Controller层
```java
// 获取歌手推荐
@GetMapping("RecommendSinger")
public Mess getRecommendSinger() {
    return musicService.getRecommendSinger(null);
}
```

### 3.2 Service层
```java
// 获取歌手推荐
Mess getRecommendSinger(Integer id);
```

### 3.3 Service实现层
```java
@Override
public Mess getRecommendSinger(Integer id) {
    try {
        // 如果userService可用，调用其RecommendSinger方法获取真实的推荐歌手列表
        if (userService != null) {
            return userService.RecommendSinger();
        }
        
        // 如果userService不可用，返回默认数据
        List<User> defaultSingers = new ArrayList<>();
        User defaultUser = new User();
        defaultUser.setId(1);
        defaultUser.setUsername("默认歌手");
        defaultSingers.add(defaultUser);
        return Mess.success().setCode(20).setMessage("获取推荐歌手成功(默认数据)").data("list", defaultSingers);
    } catch (Exception e) {
        System.err.println("获取推荐歌手出错: " + e.getMessage());
        List<User> defaultSingers = new ArrayList<>();
        User defaultUser = new User();
        defaultUser.setId(1);
        defaultUser.setUsername("默认歌手");
        defaultSingers.add(defaultUser);
        return Mess.success().setCode(20).setMessage("获取推荐歌手成功(默认数据)").data("list", defaultSingers);
    }
}
```

### 3.4 UserService推荐歌手方法
```java
@Override
public Mess RecommendSinger() {
    QueryWrapper<User> wrapper = new QueryWrapper<>();
    wrapper
        .eq("role", 1)
        .eq("activation", 1)
        .last("LIMIT 10")
        .orderByAsc("RAND()");
    List<User> list = list(wrapper);
    return Mess.success().data("list", list);
}
```
## 4. 总结
该接口已经能够实现推荐歌手功能，它会从数据库中查询真实的歌手数据，并返回给前端。这个接口可以用于前后端分离的推荐歌手功能实现。