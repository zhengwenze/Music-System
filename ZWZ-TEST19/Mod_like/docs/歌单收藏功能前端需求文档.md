# 歌单收藏功能前端需求文档

## 1. 功能概述

### 1.1 功能描述
实现歌单收藏功能，用户可以对喜欢的歌单进行收藏和取消收藏操作，并可以查看自己收藏的歌单列表。

### 1.2 核心功能点
- 歌单收藏/取消收藏按钮
- 收藏歌单列表展示
- 单个歌单详情页显示收藏状态

## 2. 接口说明

### 2.1 接口列表

| 接口名称 | 接口地址 | 请求方式 | 请求参数 | 响应数据 | 接口说明 |
|---------|---------|---------|---------|---------|---------|
| 获取歌单详情 | /api/like/songList/detail | GET | listId: 歌单ID<br>id: 用户ID(请求头) | listMessage: 歌单信息<br>musicList: 歌曲列表 | 获取歌单详情及用户收藏状态 |
| 获取收藏歌单列表 | /api/like/getLikeList | GET | id: 用户ID(请求头) | likeSongList: 收藏歌单列表 | 获取用户收藏的所有歌单 |
| 添加歌单收藏 | /api/like/addList | POST | userId: 用户ID<br>listId: 歌单ID | - | 收藏指定歌单 |
| 取消歌单收藏 | /api/like/removeList | POST | userId: 用户ID<br>listId: 歌单ID | - | 取消收藏指定歌单 |

### 2.2 接口详细说明

#### 2.2.1 获取歌单详情接口
- **接口地址**: `/api/like/songList/detail`
- **请求方式**: GET
- **请求参数**:
  - `listId`: 歌单ID (Query参数)
  - `id`: 用户ID (请求头，后端自动从token获取)
- **响应数据**:
  ```json
  {
    "code": 20,
    "message": "响应成功",
    "success": true,
    "data": {
      "listMessage": {
        "id": 1,
        "listName": "我的收藏",
        "userId": 1,
        "listDesc": "我喜欢的歌曲",
        "listStyle": "流行",
        "image": "http://example.com/image.jpg",
        "isLike": 1  // 1表示已收藏，0表示未收藏
      },
      "musicList": [
        {
          "id": 1,
          "musicName": "歌曲名称",
          "singer": "歌手名称",
          "album": "专辑名称",
          "duration": 240
        }
        // 更多歌曲...
      ]
    }
  }
  ```

#### 2.2.2 获取收藏歌单列表接口
- **接口地址**: `/api/like/getLikeList`
- **请求方式**: GET
- **请求参数**:
  - `id`: 用户ID (请求头，后端自动从token获取)
- **响应数据**:
  ```json
  {
    "code": 20,
    "message": "查询成功",
    "success": true,
    "data": {
      "likeSongList": [
        {
          "id": 1,
          "listName": "我的收藏",
          "userId": 1,
          "listDesc": "我喜欢的歌曲",
          "listStyle": "流行",
          "image": "http://example.com/image.jpg",
          "isLike": 1
        }
        // 更多歌单...
      ]
    }
  }
  ```

#### 2.2.3 添加歌单收藏接口
- **接口地址**: `/api/like/addList`
- **请求方式**: POST
- **请求体**:
  ```json
  {
    "userId": 1,
    "listId": 1
  }
  ```
- **响应数据**:
  ```json
  {
    "code": 20,
    "message": "收藏成功",
    "success": true,
    "data": null
  }
  ```

#### 2.2.4 取消歌单收藏接口
- **接口地址**: `/api/like/removeList`
- **请求方式**: POST
- **请求体**:
  ```json
  {
    "userId": 1,
    "listId": 1
  }
  ```
- **响应数据**:
  ```json
  {
    "code": 20,
    "message": "移除收藏成功",
    "success": true,
    "data": null
  }
  ```

## 3. UI/UX设计建议

### 3.1 歌单卡片设计
- 在歌单卡片右上角显示收藏按钮
- 已收藏状态：实心爱心图标，红色
- 未收藏状态：空心爱心图标，灰色
- 点击按钮切换收藏状态，并显示相应的提示信息

### 3.2 歌单详情页设计
- 在歌单详情页顶部显示收藏按钮
- 按钮状态与歌单卡片保持一致
- 点击按钮切换收藏状态，并显示相应的提示信息

### 3.3 收藏歌单列表页设计
- 展示用户收藏的所有歌单
- 每个歌单显示完整信息（封面、名称、描述、风格等）
- 提供跳转至歌单详情页的入口
- 支持删除收藏歌单的操作

## 4. 实现流程

### 4.1 歌单收藏/取消收藏流程
1. 用户进入歌单详情页或歌单列表页
2. 前端调用`/api/like/songList/detail`接口获取歌单详情及收藏状态
3. 根据返回的`isLike`字段显示收藏按钮状态
4. 用户点击收藏按钮：
   - 如果是未收藏状态，调用`/api/like/addList`接口添加收藏
   - 如果是已收藏状态，调用`/api/like/removeList`接口取消收藏
5. 接口调用成功后，更新收藏按钮状态并显示提示信息

### 4.2 收藏歌单列表展示流程
1. 用户进入"我的收藏"页面
2. 前端调用`/api/like/getLikeList`接口获取收藏歌单列表
3. 将返回的歌单列表渲染到页面上
4. 提供歌单详情页跳转和取消收藏的功能

## 5. 数据结构

### 5.1 歌单信息结构
```javascript
{
  id: Number,          // 歌单ID
  listName: String,    // 歌单名称
  userId: Number,      // 创建者ID
  listDesc: String,    // 歌单描述
  listStyle: String,   // 歌单风格
  image: String,       // 歌单封面图
  isLike: Number       // 收藏状态：1-已收藏，0-未收藏
}
```

### 5.2 歌曲信息结构
```javascript
{
  id: Number,          // 歌曲ID
  musicName: String,   // 歌曲名称
  singer: String,      // 歌手名称
  album: String,       // 专辑名称
  duration: Number     // 歌曲时长（秒）
}
```

## 6. 注意事项

### 6.1 状态管理
- 确保歌单收藏状态在不同页面间保持一致
- 建议使用全局状态管理工具（如Vuex、Redux等）管理收藏状态

### 6.2 错误处理
- 对接口调用失败的情况进行适当的错误提示
- 处理网络异常、服务器错误等边界情况

### 6.3 性能优化
- 对频繁调用的接口进行缓存处理
- 使用分页加载或虚拟滚动优化长列表性能

## 7. 兼容性要求
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 移动端适配（响应式设计）

## 8. 验收标准

### 8.1 功能验收
- 歌单收藏/取消收藏功能正常工作
- 收藏状态在不同页面间保持一致
- 收藏歌单列表正确展示

### 8.2 性能验收
- 接口响应时间≤500ms
- 页面加载流畅，无明显卡顿

### 8.3 用户体验验收
- 操作反馈及时明确
- 界面设计美观易用
- 错误提示友好